// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Industries {
  id    Int     @default(autoincrement()) @id
  name String
  companies Companies[]
}

model Companies {
  id    Int     @default(autoincrement()) @id
  symbol String @unique
  name String
  displaySymbol String
  currency String
  figi String
  mic String
  type String
  country String?
  exchange String?
  ipo DateTime?
  marketCapitalization Float?
  shareOutstanding Float?
  phone String?
  webUrl String?
  logo String?
  industry Industries? @relation(fields: [industryId], references: [id])
  industryId Int?

  earningsCalendar EarningsCalendar[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model EarningsCalendar {
  id    Int     @default(autoincrement()) @id
  symbol String
  date DateTime
  epsActual Float?
  epsEstimate Float?
  hour String?
  quarter Int?
  revenueActual BigInt?
  revenueEstimate BigInt?
  year Int?
  company Companies @relation(fields: [symbol], references: [symbol])

  @@unique([symbol, date])
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}